(window["webpackJsonphook-tetris"]=window["webpackJsonphook-tetris"]||[]).push([[0],{10:function(e,t,r){},11:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),o=r(4),u=r.n(o),a=(r(10),r(2)),i=r(1);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(r,!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e,t,r,n){var c=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"transparent";return new Array(e).fill(r).map((function(e){return new Array(t).fill(r)}))}(r,n);return e.concat(t).forEach((function(e){var t=c[e.x];t&&(t[e.y]=e.color)})),c},l=function(e,t){return e.reduce((function(e,r){return e||void 0!==t.find((function(e){return e.x===r.x&&e.y===r.y}))}),!1)},s=function(e,t,r){var n=e.map((function(e){return y({},e,{x:e.x+5,y:e.y+5})})),c=n[n.length-1],o=c.x,u=c.y,a=Math.cos(-Math.PI/2),i=Math.sin(-Math.PI/2),f=n.map((function(e){return y({},e,{x:parseInt(a*(e.x-o)-i*(e.y-u)+o)-5,y:parseInt(i*(e.x-o)+a*(e.y-u)+u)-5})}));return l(f,t)||function(e,t){return e.reduce((function(e,r){return e||r.y<0||r.y>=t}),!1)}(f,r)?e.map((function(e){return y({},e)})):f},m=function(e,t){return e.map((function(e){return y({},e,{},t)}))},x=function(e){var t,r,n=Math.floor(e/2),c=[m([{x:-2,y:n-1},{x:-2,y:n},{x:-2,y:n+1},{x:-1,y:n}],{color:"#0031ff"}),m([{x:-1,y:n-2},{x:-1,y:n-1},{x:-1,y:n+1},{x:-1,y:n}],{color:"#00b6df"}),m([{x:-2,y:n-1},{x:-1,y:n-1},{x:-1,y:n+1},{x:-1,y:n}],{color:"#e17b00"}),m([{x:-2,y:n+1},{x:-1,y:n-1},{x:-1,y:n+1},{x:-1,y:n}],{color:"#b700ff"}),m([{x:-2,y:n},{x:-1,y:n},{x:-2,y:n+1},{x:-1,y:n+1}],{color:"#e4e300"}),m([{x:-1,y:n},{x:-2,y:n+1},{x:-1,y:n-1},{x:-2,y:n}],{color:"#00e009"}),m([{x:-1,y:n},{x:-2,y:n-1},{x:-1,y:n+1},{x:-2,y:n}],{color:"#e20016"})],o=parseInt(1e12*Math.random());return m(c[(t=0,r=c.length-1,Math.floor(t+Math.random()*(r+1-t)))],{id:o})},g=function(e){var t=e.map,r=e.count;return c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"game-wrapper"},c.a.createElement("div",{className:"game-counter"},r),t.map((function(e,t){return c.a.createElement("div",{className:"game-row",key:t},e.map((function(e,t){return c.a.createElement("div",{className:"game-item",key:t,style:{backgroundColor:e}},"\xa0")})))}))))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(r,!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(e,t){if("changeX"===t.type||"changeY"===t.type){var r;if("changeX"===t.type)r=e.figure.map((function(e){return b({},e,{x:e.x+1})}));else if("changeY"===t.type){var n=e.figure.map((function(e){return b({},e,{y:e.y+t.payload})}));if(!(n.reduce((function(e,t){return e&&t.y>=0&&t.y<9}),!0)&&!l(n,e.map)))return b({},e);r=n}if(function(e,t,r){return e.reduce((function(e,n){var c=n.x+1;return e||c>=r||void 0!==t.find((function(e){return e.x===c&&e.y===n.y}))}),!1)}(r,e.map,20)){var c=function(e,t){var r=e.reduce((function(e,t){return y({},e,Object(i.a)({},t.x,(e[t.x]||[]).concat(t)))}),{}),n=Object.entries(r).reduce((function(e,r){var n=Object(a.a)(r,2),c=n[0];return n[1].length===t?e.concat(+c):e}),[]);return{map:e.filter((function(e){return!n.includes(e.x)})).map((function(e){return y({},e,{x:e.x+n.filter((function(t){return e.x<t})).length})})),count:n.length}}(e.map.concat(r),9),o=c.map,u=c.count;return function(e){return void 0!==e.find((function(e){return 0===e.x}))}(o)?b({},e,{figure:x(9),map:[],count:0}):b({},e,{figure:x(9),map:o,count:e.count+u})}return b({},e,{figure:r})}if("rotate"===t.type)return b({},e,{figure:s(e.figure,e.map,9)})},v=function(e){return{type:"changeY",payload:e}},h=function(){var e=Object(n.useReducer)(O,{figure:x(9),map:[],count:0}),t=Object(a.a)(e,2),r=t[0],o=t[1];Object(n.useEffect)((function(){setInterval((function(){o({type:"changeX"})}),500)}),[]),Object(n.useEffect)((function(){window.addEventListener("keydown",(function(e){var t=e.key;"ArrowLeft"===t?o(v(-1)):"ArrowRight"===t?o(v(1)):"ArrowDown"===t?o({type:"changeX"}):"ArrowUp"===t&&o({type:"rotate"})}))}),[]);var u=r.map,i=r.figure,f=r.count;return c.a.createElement(g,{map:p(u,i,20,9),count:f})},w=function(){return c.a.createElement("div",{className:"app-wrapper"},c.a.createElement(h,null))};u.a.render(c.a.createElement(w,null),document.getElementById("root"))},5:function(e,t,r){e.exports=r(11)}},[[5,1,2]]]);
//# sourceMappingURL=main.f4e11b2f.chunk.js.map